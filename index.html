<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Arcade — Snake (One‑File Site)</title>
  <meta name="description" content="A single‑file Snake game you can host anywhere (GitHub Pages, Netlify, Vercel)." />
  <style>
    :root{
      --bg:#0b1020;
      --panel:#121833;
      --ink:#eef2ff;
      --muted:#8ea0ff;
      --accent:#6ee7b7;
      --danger:#ff6b6b;
      --grid:#1a244a;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 20px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font:16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink); background: radial-gradient(1200px 800px at 15% 10%, #12183a 0, #0b1020 60%);
      display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .card{
      width:min(900px, 100%);
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.08);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    header{
      display:flex; gap:12px; align-items:center; justify-content:space-between;
      padding:20px 22px; background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0));
    }
    .brand{display:flex; gap:12px; align-items:center}
    .logo{width:36px;height:36px;border-radius:12px;background:conic-gradient(from 180deg at 50% 50%, #6ee7b7, #8ea0ff, #6ee7b7); filter:saturate(1.2) hue-rotate(8deg)}
    h1{font-size:18px; margin:0}
    .sub{color:var(--muted); font-size:13px}
    .actions{display:flex; gap:8px}
    button, .link-btn{
      appearance:none; border:none; cursor:pointer; color:var(--ink);
      background:#1a244a; padding:10px 14px; border-radius:12px; box-shadow:var(--shadow);
    }
    .primary{background:linear-gradient(90deg, #6ee7b7, #8ea0ff); color:#0b1020; font-weight:700}
    .wrap{display:grid; grid-template-columns: 1.2fr .8fr; gap:18px; padding:18px;}
    @media (max-width: 840px){ .wrap{grid-template-columns:1fr} }

    .stage{
      background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
      border:1px solid rgba(255,255,255,.06);
      border-radius:16px; padding:16px; position:relative;
    }
    .hud{display:flex; gap:14px; flex-wrap:wrap; align-items:center; margin-bottom:12px}
    .pill{
      background:#101736; border:1px solid rgba(255,255,255,.08); color:var(--ink);
      padding:8px 12px; border-radius:999px; font-weight:600; display:flex; gap:8px; align-items:center;
    }
    .pill small{color:var(--muted); font-weight:500}

    canvas{
      width:100%; aspect-ratio:1/1; display:block; image-rendering: pixelated; border-radius:12px; background:#0b122d; border:1px solid rgba(255,255,255,.08);
    }

    .side{
      background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
      border:1px solid rgba(255,255,255,.06);
      border-radius:16px; padding:16px;
    }
    .side h2{margin:6px 0 8px 0; font-size:16px}
    .side p{margin:0 0 10px 0; color:var(--muted)}
    ul{margin:0 0 12px 18px; color:var(--muted)}

    .kbd{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; background:#0b122d; border:1px solid rgba(255,255,255,.14); padding:2px 6px; border-radius:8px; font-size:13px}
    .status{position:absolute; inset:0; display:grid; place-items:center; text-align:center; pointer-events:none}
    .status .panel{background:rgba(7,12,30,.7); backdrop-filter: blur(6px); border:1px solid rgba(255,255,255,.1); padding:18px; border-radius:14px}
    .status h3{margin:0 0 6px 0}

    .mobile-keys{display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-top:10px}
    .mobile-keys button{padding:14px 0; font-weight:700}
    .mobile-only{display:none}
    @media (hover:none){ .mobile-only{display:block}}
  </style>
</head>
<body>
  <div class="card" role="application" aria-label="Snake game">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>Arcade — Snake</h1>
          <div class="sub">Single‑file website. No frameworks. Plays offline.</div>
        </div>
      </div>
      <div class="actions">
        <button class="primary" id="playPauseBtn" aria-label="Play or pause">▶ Play</button>
        <button id="resetBtn" aria-label="Reset game">↺ Reset</button>
      </div>
    </header>

    <div class="wrap">
      <section class="stage">
        <div class="hud" aria-live="polite">
          <div class="pill"><small>Score</small> <span id="score">0</span></div>
          <div class="pill"><small>High</small> <span id="high">0</span></div>
          <div class="pill"><small>Speed</small> <span id="speed">Normal</span></div>
        </div>
        <canvas id="game" width="600" height="600" aria-label="Game board"></canvas>
        <div class="status" id="status">
          <div class="panel">
            <h3 id="statusTitle">Paused</h3>
            <div id="statusHelp" class="sub">Press <span class="kbd">Space</span> or tap ▶ Play</div>
          </div>
        </div>
        <div class="mobile-only">
          <div class="mobile-keys">
            <button data-dir="up">▲</button>
            <div></div>
            <button data-dir="right">▶</button>
            <button data-dir="left">◀</button>
            <div></div>
            <button data-dir="down">▼</button>
          </div>
        </div>
      </section>

      <aside class="side">
        <h2>How to play</h2>
        <p>Steer the snake to eat the food and grow. Don’t crash into walls or yourself.</p>
        <ul>
          <li><span class="kbd">WASD</span> or arrow keys to move</li>
          <li><span class="kbd">Space</span> to play/pause</li>
          <li><span class="kbd">R</span> to reset</li>
        </ul>
        <h2>Host this site (free)</h2>
        <p>Upload this single HTML file to GitHub Pages, Netlify, or Vercel and you’ll get a free subdomain.</p>
        <ul>
          <li>GitHub Pages → <span class="kbd">yourname.github.io/repo</span></li>
          <li>Netlify → <span class="kbd">your-site.netlify.app</span></li>
          <li>Vercel → <span class="kbd">your-site.vercel.app</span></li>
        </ul>
      </aside>
    </div>
  </div>

  <script>
    (function(){
      const canvas = document.getElementById('game');
      const ctx = canvas.getContext('2d');
      const scoreEl = document.getElementById('score');
      const highEl = document.getElementById('high');
      const speedEl = document.getElementById('speed');
      const statusEl = document.getElementById('status');
      const statusTitle = document.getElementById('statusTitle');
      const statusHelp = document.getElementById('statusHelp');
      const playPauseBtn = document.getElementById('playPauseBtn');
      const resetBtn = document.getElementById('resetBtn');

      const gridSize = 20; // 20x20
      const cell = canvas.width / gridSize;

      const SPEEDS = { slow: 140, normal: 110, fast: 85 };
      let speedKey = 'normal';

      let snake, dir, nextDir, food, score, high, loopId, alive, running;

      function randInt(min, max){ return Math.floor(Math.random()*(max-min+1))+min; }

      function init(){
        snake = [{x:10,y:10},{x:9,y:10},{x:8,y:10}];
        dir = {x:1,y:0};
        nextDir = {...dir};
        food = spawnFood();
        score = 0;
        alive = true;
        running = false;
        updateHUD();
        draw();
        showStatus('Paused', 'Press Space or tap ▶ Play');
      }

      function spawnFood(){
        let spot;
        do {
          spot = { x: randInt(0, gridSize-1), y: randInt(0, gridSize-1) };
        } while (snake.some(s => s.x===spot.x && s.y===spot.y));
        return spot;
      }

      function updateHUD(){
        scoreEl.textContent = score;
        if(!high){ high = Number(localStorage.getItem('snakeHigh')||0); }
        if(score > high){ high = score; localStorage.setItem('snakeHigh', high); }
        highEl.textContent = high;
        speedEl.textContent = speedKey.charAt(0).toUpperCase()+speedKey.slice(1);
      }

      function draw(){
        // background
        ctx.fillStyle = '#0b122d';
        ctx.fillRect(0,0,canvas.width, canvas.height);
        // subtle grid
        ctx.strokeStyle = '#10183a';
        ctx.lineWidth = 1;
        for(let i=0;i<=gridSize;i++){
          ctx.beginPath(); ctx.moveTo(i*cell,0); ctx.lineTo(i*cell, canvas.height); ctx.stroke();
          ctx.beginPath(); ctx.moveTo(0,i*cell); ctx.lineTo(canvas.width, i*cell); ctx.stroke();
        }
        // food
        ctx.fillStyle = '#6ee7b7';
        roundRect(food.x*cell+4, food.y*cell+4, cell-8, cell-8, 6, true);
        // snake
        snake.forEach((s, idx)=>{
          const head = idx===0;
          ctx.fillStyle = head ? '#8ea0ff' : '#5062d6';
          roundRect(s.x*cell+3, s.y*cell+3, cell-6, cell-6, 8, true);
          if(head){
            // eyes
            ctx.fillStyle = '#0b1020';
            const ex = s.x*cell + cell/2 + (dir.x*3);
            const ey = s.y*cell + cell/2 + (dir.y*3);
            ctx.beginPath(); ctx.arc(ex-5, ey-5, 2.2, 0, Math.PI*2); ctx.fill();
            ctx.beginPath(); ctx.arc(ex+5, ey+5, 2.2, 0, Math.PI*2); ctx.fill();
          }
        });
      }

      function roundRect(x,y,w,h,r,fill){
        ctx.beginPath();
        ctx.moveTo(x+r,y);
        ctx.arcTo(x+w,y,x+w,y+h,r);
        ctx.arcTo(x+w,y+h,x,y+h,r);
        ctx.arcTo(x,y+h,x,y,r);
        ctx.arcTo(x,y,x+w,y,r);
        if(fill) ctx.fill(); else ctx.stroke();
      }

      function step(){
        if(!running || !alive) return;
        dir = nextDir;
        const head = { x: snake[0].x + dir.x, y: snake[0].y + dir.y };
        // wall
        if(head.x<0 || head.y<0 || head.x>=gridSize || head.y>=gridSize){
          return gameOver('You hit a wall!');
        }
        // self
        if(snake.some((s,i)=> i>0 && s.x===head.x && s.y===head.y)){
          return gameOver('You bit yourself!');
        }
        snake.unshift(head);
        if(head.x === food.x && head.y === food.y){
          score += 1;
          food = spawnFood();
        } else {
          snake.pop();
        }
        updateHUD();
        draw();
      }

      function loop(){
        clearInterval(loopId);
        loopId = setInterval(step, SPEEDS[speedKey]);
      }

      function gameOver(msg){
        alive = false; running = false;
        clearInterval(loopId);
        showStatus('Game Over', msg + ' Press R to restart.');
      }

      function showStatus(title, help){
        statusTitle.textContent = title;
        statusHelp.innerHTML = help;
        statusEl.style.opacity = 1;
      }
      function hideStatus(){ statusEl.style.opacity = 0; }

      function toggleRun(){
        if(!alive){ return; }
        running = !running;
        if(running){ hideStatus(); loop(); playPauseBtn.textContent = '⏸ Pause'; }
        else { showStatus('Paused', 'Press Space or tap ▶ Play'); playPauseBtn.textContent = '▶ Play'; }
      }

      // controls
      document.addEventListener('keydown', (e)=>{
        const k = e.key.toLowerCase();
        const map = { arrowup:'up', w:'up', arrowdown:'down', s:'down', arrowleft:'left', a:'left', arrowright:'right', d:'right', ' ':'space', r:'r', '1':'slow', '2':'normal', '3':'fast' };
        const act = map[k]; if(!act) return;
        if(['up','down','left','right'].includes(act)){
          const d = dirFrom(act);
          // prevent 180 turns
          if(d.x !== -dir.x || d.y !== -dir.y){ nextDir = d; }
        } else if(act==='space'){ toggleRun(); }
        else if(act==='r'){ init(); }
        else if(['slow','normal','fast'].includes(act)){
          speedKey = act; if(running) loop(); updateHUD();
        }
      });

      document.querySelectorAll('[data-dir]').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const d = dirFrom(btn.dataset.dir);
          if(d.x !== -dir.x || d.y !== -dir.y){ nextDir = d; }
        });
      });

      playPauseBtn.addEventListener('click', toggleRun);
      resetBtn.addEventListener('click', init);

      function dirFrom(name){
        return name==='up'?{x:0,y:-1}:
               name==='down'?{x:0,y:1}:
               name==='left'?{x:-1,y:0}:{x:1,y:0};
      }

      // Responsiveness: keep square canvas pixels crisp
      function fitCanvas(){
        const size = Math.min(canvas.clientWidth, canvas.clientHeight);
        const dpr = window.devicePixelRatio || 1;
        canvas.width = Math.floor(size*dpr);
        canvas.height = Math.floor(size*dpr);
        draw();
      }
      const ro = new ResizeObserver(fitCanvas); ro.observe(canvas);

      // boot
      init();
    })();
  </script>
</body>
</html>
